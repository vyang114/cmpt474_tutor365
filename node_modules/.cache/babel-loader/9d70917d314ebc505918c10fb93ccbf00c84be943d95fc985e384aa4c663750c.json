{"ast":null,"code":"var _jsxFileName = \"/Users/vera/Documents/SFU/Homework/Spring 2023/CMPT474/Project/amplify_cmpt474/src/pages/Home.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport './css/home.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  const [courses, setCourses] = useState([]);\n  const [bookmarkedCourses, setBookmarkedCourses] = useState([]);\n  const colours = [\"#EDAA6C\", \"#EA713D\", \"#D83E27\", \"#152B53\", \"#1F6E8E\", \"#2C8B98\", \"#82A8A0\"];\n\n  // fetch courses and bookmarked courses on mount\n  useEffect(() => {\n    const fetchData = async () => {\n      // fetch courses\n      const response = await fetch(\"https://56j70ao9r7.execute-api.us-east-1.amazonaws.com/dev\", {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          \"action\": \"SCAN\"\n        }),\n        redirect: 'follow'\n      });\n      const data = await response.json();\n      const obj = JSON.parse(data.body);\n      setCourses(obj.Items);\n\n      // fetch bookmarked courses\n      const bookmarkResponse = await fetch(`https://v9v2zwoza6.execute-api.us-east-2.amazonaws.com/prod/bookmarks?username=tosrif123`);\n      const bookmarks = await bookmarkResponse.json();\n      setBookmarkedCourses(bookmarks.map(b => b.courseID));\n    };\n    fetchData();\n  }, []);\n\n  // toggle bookmark\n  const toggleBookmark = async (course, index) => {\n    const bookmark = {\n      username: \"tosrif123\",\n      courseID: String(index),\n      courseName: course.courseName.S,\n      description: course.description.S,\n      price: course.price.S\n    };\n    if (bookmarkedCourses.includes(bookmark.courseID)) {\n      // if bookmark is already saved, delete it\n      try {\n        const existingBookmark = {\n          username: bookmark.username,\n          courseID: bookmark.courseID\n        };\n        await fetch(`https://v9v2zwoza6.execute-api.us-east-2.amazonaws.com/prod/bookmarks`, {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(existingBookmark)\n        });\n        console.log(\"Bookmark deleted\");\n        setBookmarkedCourses(bookmarkedCourses.filter(id => id !== bookmark.courseID));\n      } catch (error) {\n        console.error(error);\n        alert(\"Failed to delete bookmark. Please try again later.\");\n      }\n    } else {\n      // if bookmark is not saved yet, save it\n      try {\n        await fetch('https://v9v2zwoza6.execute-api.us-east-2.amazonaws.com/prod/bookmarks', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(bookmark)\n        });\n        console.log(\"Bookmark saved\");\n        setBookmarkedCourses([...bookmarkedCourses, bookmark.courseID]);\n      } catch (error) {\n        console.error(error);\n        alert(\"Failed to save bookmark. Please try again later.\");\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"title\", {\n      children: \"Home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Courses\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"separator\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"courses-container\",\n        children: courses.map((course, index) => {\n          const isBookmarked = bookmarkedCourses.includes(String(index));\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"course-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"course-header\",\n              style: {\n                background: `${colours[index]}`\n              },\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"bookmark\",\n                onClick: () => toggleBookmark(course, index),\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: `fa ${isBookmarked ? \"fa-bookmark\" : \"fa-bookmark-o\"} fa-3x`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"course-item-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: course.courseName.S\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"course-desc\",\n                children: course.description.S\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"link-price\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"price\",\n                  children: course.price.S\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Home, \"QG3tGCM8XKSR+sxvc7+JQTHcUrs=\");\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","Home","_s","courses","setCourses","bookmarkedCourses","setBookmarkedCourses","colours","fetchData","response","fetch","method","headers","body","JSON","stringify","redirect","data","json","obj","parse","Items","bookmarkResponse","bookmarks","map","b","courseID","toggleBookmark","course","index","bookmark","username","String","courseName","S","description","price","includes","existingBookmark","console","log","filter","id","error","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","className","isBookmarked","style","background","onClick","_c","$RefreshReg$"],"sources":["/Users/vera/Documents/SFU/Homework/Spring 2023/CMPT474/Project/amplify_cmpt474/src/pages/Home.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport './css/home.css';\n\nconst Home = () => {\n  const [courses, setCourses] = useState([]);\n  const [bookmarkedCourses, setBookmarkedCourses] = useState([]);\n  const colours = [\"#EDAA6C\", \"#EA713D\", \"#D83E27\", \"#152B53\", \"#1F6E8E\", \"#2C8B98\", \"#82A8A0\"]\n\n  // fetch courses and bookmarked courses on mount\n  useEffect(() => {\n    const fetchData = async () => {\n      // fetch courses\n      const response = await fetch(\"https://56j70ao9r7.execute-api.us-east-1.amazonaws.com/dev\", {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\"action\": \"SCAN\"}),\n        redirect: 'follow'\n      });\n      const data = await response.json();\n      const obj = JSON.parse(data.body);\n      setCourses(obj.Items);\n\n      // fetch bookmarked courses\n      const bookmarkResponse = await fetch(`https://v9v2zwoza6.execute-api.us-east-2.amazonaws.com/prod/bookmarks?username=tosrif123`);\n      const bookmarks = await bookmarkResponse.json();\n      setBookmarkedCourses(bookmarks.map(b => b.courseID));\n    }\n    fetchData();\n  }, []);\n\n  // toggle bookmark\n  const toggleBookmark = async (course, index) => {\n    const bookmark = {\n      username: \"tosrif123\",\n      courseID: String(index),\n      courseName: course.courseName.S,\n      description: course.description.S,\n      price: course.price.S\n    };\n\n    if (bookmarkedCourses.includes(bookmark.courseID)) {\n      // if bookmark is already saved, delete it\n      try {\n        const existingBookmark = {\n          username: bookmark.username,\n          courseID: bookmark.courseID\n        };\n        await fetch(`https://v9v2zwoza6.execute-api.us-east-2.amazonaws.com/prod/bookmarks`, {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(existingBookmark)\n        });\n        console.log(\"Bookmark deleted\");\n        setBookmarkedCourses(bookmarkedCourses.filter(id => id !== bookmark.courseID));\n      } catch (error) {\n        console.error(error);\n        alert(\"Failed to delete bookmark. Please try again later.\");\n      }\n    } else {\n      // if bookmark is not saved yet, save it\n      try {\n        await fetch('https://v9v2zwoza6.execute-api.us-east-2.amazonaws.com/prod/bookmarks', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(bookmark)\n        });\n        console.log(\"Bookmark saved\");\n        setBookmarkedCourses([...bookmarkedCourses, bookmark.courseID]);\n      } catch (error) {\n        console.error(error);\n        alert(\"Failed to save bookmark. Please try again later.\");\n      }\n    }\n  };\n\n  return (\n    <>\n      <title>Home</title>\n      <div className=\"wrapper\">\n        <h1>Courses</h1>\n        <div className=\"separator\"></div>\n        <div className=\"courses-container\">\n          {courses.map((course, index) => {\n            const isBookmarked = bookmarkedCourses.includes(String(index));\n            return (\n              <div className=\"course-item\" key={index}>\n                <div className=\"course-header\" style={{ background: `${colours[index]}` }}>\n                <button className=\"bookmark\" onClick={() => toggleBookmark(course, index)}> \n                    <i className={`fa ${isBookmarked ? \"fa-bookmark\" : \"fa-bookmark-o\"} fa-3x`}></i>\n                  </button>\n                </div>\n                <div className=\"course-item-text\">\n                <h4>{course.courseName.S}</h4>\n                <p className=\"course-desc\">{course.description.S}</p>\n                <div className=\"link-price\">\n                  <p className=\"price\">{course.price.S}</p>\n                </div>\n              </div>\n            </div>\n          )})}\n        </div>\n      </div>\n    </>\n  );\n}\n  \nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}